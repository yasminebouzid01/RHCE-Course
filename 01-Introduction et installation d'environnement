1. Introduction

Ansible est un outil open-source d'automatisation utilisé pour la gestion de configuration, le déploiement d'applications et l'automatisation des tâches. Il est conçu pour être simple et efficace, sans nécessiter d'agent sur les machines gérées.

Principaux composants
Control Node (Master) : Machine où Ansible est installé et exécuté. Il gère les inventaires et exécute les playbooks.
Managed Nodes (Slaves) : Machines cibles administrées par Ansible via SSH (Linux) ou WinRM (Windows). Aucun agent Ansible n’est requis.
Inventory : Fichier (INI ou YAML) listant les nœuds gérés, organisé en groupes pour faciliter l'administration.
Playbooks : Fichiers YAML contenant des tâches automatisées comme l’installation de logiciels ou la gestion des services.
Modules : Fonctions intégrées permettant d’exécuter des actions spécifiques sur les nœuds gérés.
Tasks et Handlers : Actions spécifiques définies dans les playbooks, avec possibilité d’exécuter des tâches conditionnellement.
Roles et Variables : Permettent une organisation modulaire et une configuration dynamique des playbooks.
Ansible communique principalement via SSH (Linux) ou WinRM (Windows), rendant son architecture simple et sécurisée.

2. Installation de l'Environnement
2.1 Installation de Python 3 sur Tous les Nœuds
Ansible requiert Python 3 sur les nœuds gérés. Pour l’installer :

bash
Copier
Modifier
sudo dnf install -y python3
2.2 Installation d'Ansible Core sur le Control Node
Sur le Control Node, installez Python 3 et pip si nécessaire :

bash
Copier
Modifier
sudo dnf install -y python3 python3-pip
Ensuite, installez Ansible Core :

bash
Copier
Modifier
pip3 install --user ansible
Vérifiez l’installation :

bash
Copier
Modifier
ansible --version
2.3 Création de l'Utilisateur Ansible sur Tous les Nœuds
Méthode manuelle
Sur chaque nœud (Control Node et Managed Nodes) :

bash
Copier
Modifier
sudo useradd -m -s /bin/bash ansible
echo "ansible:ansible" | sudo chpasswd
Automatisation avec Ansible
Créez un fichier create_ansible_user.yml contenant :

yaml
Copier
Modifier
- name: Création de l'utilisateur ansible sur tous les nœuds
  hosts: all
  become: yes
  tasks:
    - name: Créer l'utilisateur ansible
      user:
        name: ansible
        state: present
        shell: /bin/bash
        password: "{{ 'ansible' | password_hash('sha512') }}"
Exécutez le playbook en spécifiant votre fichier d'inventaire :

bash
Copier
Modifier
ansible-playbook -i inventory_file_path create_ansible_user.yml
Remarque de Sécurité
Évitez d’utiliser des mots de passe en clair. Préférez des méthodes plus sécurisées comme Ansible Vault pour le stockage des informations sensibles.


